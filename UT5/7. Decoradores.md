# 7. Decoradores 

Los **decoradores** en Python son una manera elegante y potente de modificar el comportamiento de una funci贸n o un m茅todo sin alterar su c贸digo directamente. Un decorador es esencialmente una funci贸n que recibe otra funci贸n como argumento, le a帽ade funcionalidades adicionales, y devuelve una nueva funci贸n. 

Los decoradores son 煤tiles para reutilizar c贸digo, mejorar la modularidad y aplicar patrones como logging, validaci贸n de permisos, etc., de una forma clara y concisa.

## Sintaxis b谩sica de un decorador

Un decorador en Python se utiliza con el s铆mbolo `@` seguido del nombre de la funci贸n decoradora, justo antes de la definici贸n de la funci贸n que se desea decorar.

### Ejemplo b谩sico de decorador:

```python
def decorador(func):
    def funcion_decorada():
        print("Antes de ejecutar la funci贸n.")
        func()
        print("Despu茅s de ejecutar la funci贸n.")
    return funcion_decorada

@decorador
def saludo():
    print("隆Hola, mundo!")

saludo()
```

### Salida:
```bash
Antes de ejecutar la funci贸n.
隆Hola, mundo!
Despu茅s de ejecutar la funci贸n.
```

En este ejemplo, la funci贸n `saludo()` est谩 siendo decorada por `decorador`. Antes y despu茅s de la ejecuci贸n de `saludo()`, se imprimen mensajes adicionales.

---

## Ejemplo aplicado a la clase Coches 

Ahora, adaptaremos este concepto al ejemplo de los coches. Supongamos que queremos decorar el m茅todo `arrancar` para que, antes de que un coche arranque, se verifique si tiene combustible suficiente para funcionar.

### Definir un decorador para la clase `Coche`

```python
# Definimos el decorador
def verificar_combustible(func):
    def decorar(self):
        if self.combustible > 0:
            print("Verificaci贸n completa: hay suficiente combustible.")
            return func(self)  # Llama al m茅todo 'arrancar'
        else:
            print("Error: No hay suficiente combustible para arrancar.")
    return decorar

# Clase Coche
class Coche:
    def __init__(self, marca, modelo, combustible):
        self.marca = marca
        self.modelo = modelo
        self.combustible = combustible

    @verificar_combustible
    def arrancar(self):
        print(f"El {self.marca} {self.modelo} est谩 arrancando.")

# Instancia de Coche con combustible suficiente
mi_coche = Coche("Toyota", "Corolla", 10)
mi_coche.arrancar()

# Instancia de Coche sin combustible
mi_coche_vacio = Coche("Tesla", "Model 3", 0)
mi_coche_vacio.arrancar()
```

### Explicaci贸n del ejemplo:

1. **Decorador `verificar_combustible`**:
    - Este decorador revisa si el coche tiene suficiente combustible antes de permitir que el m茅todo `arrancar()` se ejecute.
    - Si el coche tiene combustible (`self.combustible > 0`), llama a la funci贸n decorada (`func(self)`), que en este caso es `arrancar`.
    - Si no hay suficiente combustible, se imprime un mensaje de error y la funci贸n decorada no se ejecuta.

2. **Clase `Coche`**:
    - `Coche` tiene un m茅todo `arrancar`, que ha sido decorado con `@verificar_combustible`. Antes de que el coche pueda arrancar, se verifica si hay combustible.

3. **Instancias de `Coche`**:
    - En el primer caso, `mi_coche` tiene combustible, por lo que el coche arranca normalmente.
    - En el segundo caso, `mi_coche_vacio` no tiene combustible, por lo que el coche no puede arrancar.

---

## Decoradores con Par谩metros

Si necesitas que el decorador acepte par谩metros adicionales, puedes anidar funciones dentro del decorador. A continuaci贸n, mostramos c贸mo aplicar un decorador con par谩metros:

```python
def loggear_actividad(nivel):
    def decorador(func):
        def decorar(*args, **kwargs):
            print(f"[{nivel}] Ejecutando: {func.__name__}")
            return func(*args, **kwargs)
        return decorar
    return decorador

class Coche:
    def __init__(self, marca, modelo, combustible):
        self.marca = marca
        self.modelo = modelo
        self.combustible = combustible

    @loggear_actividad("INFO")
    def arrancar(self):
        print(f"El {self.marca} {self.modelo} est谩 arrancando.")

mi_coche = Coche("Toyota", "Corolla", 10)
mi_coche.arrancar()
```

### Salida:
```bash
[INFO] Ejecutando: arrancar
El Toyota Corolla est谩 arrancando.
```

En este caso, el decorador `loggear_actividad` acepta un par谩metro (`nivel`) y a帽ade un mensaje de log con el nivel especificado cada vez que se llama al m茅todo `arrancar`.

---

## Conclusi贸n

Los **decoradores** son una poderosa herramienta en Python para a帽adir funcionalidad a funciones y m茅todos sin modificar su c贸digo original. En el ejemplo de los coches, hemos visto c贸mo se puede utilizar un decorador para verificar si el coche tiene combustible antes de arrancar, lo que ayuda a mantener el c贸digo m谩s modular y limpio. Adem谩s, los decoradores permiten reutilizar l贸gica com煤n, como la verificaci贸n de condiciones o el logging, de manera f谩cil y eficiente.
